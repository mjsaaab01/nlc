"use strict";(self.webpackChunkreservation_system_frontend=self.webpackChunkreservation_system_frontend||[]).push([[767],{2767:(V,d,u)=>{u.r(d),u.d(d,{SignupModule:()=>F});var p=u(6895),s=u(433),l=u(9965),e=u(8256),g=u(6221);function _(n,o){if(1&n){const t=e.EpF();e.TgZ(0,"div",7)(1,"div")(2,"div",33)(3,"button",34),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onDelete())}),e.qZA(),e.TgZ(4,"p",35),e._uU(5),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(2),e.Q6J("ngClass","Check your email in order to verify your account."===t.message?"is-success":"is-danger"),e.xp6(3),e.Oqu(t.message)}}function v(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1,"name is required."),e.qZA())}function Z(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1," name must have at least 3 character. "),e.qZA())}function w(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1," name must have at most 30 characters. "),e.qZA())}function y(n,o){if(1&n&&(e.TgZ(0,"div",36),e.YNc(1,v,2,0,"div",37),e.YNc(2,Z,2,0,"div",37),e.YNc(3,w,2,0,"div",37),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.name.errors?null:t.name.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.name.errors?null:t.name.errors.minlength),e.xp6(1),e.Q6J("ngIf",null==t.name.errors?null:t.name.errors.maxlength)}}function T(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1,"email is required."),e.qZA())}function C(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1," Invalid email format. "),e.qZA())}function k(n,o){if(1&n&&(e.TgZ(0,"div",36),e.YNc(1,T,2,0,"div",37),e.YNc(2,C,2,0,"div",37),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.email.errors?null:t.email.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.email.errors?null:t.email.errors.pattern)}}function I(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1," password is required. "),e.qZA())}function q(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1," password must have at minimum eight characters, at least one uppercase letter, one lowercase letter, one number and one special character. "),e.qZA())}function N(n,o){if(1&n&&(e.TgZ(0,"div",36),e.YNc(1,I,2,0,"div",37),e.YNc(2,q,2,0,"div",37),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",null==t.password.errors?null:t.password.errors.required),e.xp6(1),e.Q6J("ngIf",null==t.password.errors?null:t.password.errors.pattern)}}function A(n,o){1&n&&(e.TgZ(0,"div"),e._uU(1,"password must match"),e.qZA())}function x(n,o){if(1&n&&(e.TgZ(0,"div",36),e.YNc(1,A,2,0,"div",37),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.confirmpassword.errors)}}const f=function(n,o){return{"fa-eye":n,"fa-eye-slash":o}};function J(n,o){if(1&n&&(e.TgZ(0,"article",18)(1,"div",19),e._uU(2),e.qZA()()),2&n){const t=e.oxw();e.ekj("is-success","Account is Verified"===t.message||"Account is already Verified"===t.message)("is-danger","Account is Verified"!==t.message),e.xp6(2),e.Oqu(t.message)}}function U(n,o){if(1&n&&e._UZ(0,"progress",20),2&n){const t=e.oxw();e.Q6J("value",t.progressNumber)}}const b=[{path:"",component:(()=>{class n{constructor(t,i,r,a){this.formBuilder=t,this.router=i,this.route=r,this.authService=a,this.user={}}ngOnInit(){this.signupForm=this.formBuilder.group({name:new s.NI(this.user.name,[s.kI.required,s.kI.minLength(3),s.kI.maxLength(30)]),email:new s.NI(this.user.email,[s.kI.required]),role:new s.NI("student",[s.kI.required]),password:new s.NI(this.user.password,[s.kI.required,s.kI.minLength(8),s.kI.pattern(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/)]),confirmpassword:new s.NI(this.user.confirmpassword,[s.kI.required])},{validator:this.ConfirmedValidator("password","confirmpassword")})}get name(){return this.signupForm.get("name")}get email(){return this.signupForm.get("email")}get password(){return this.signupForm.get("password")}get confirmpassword(){return this.signupForm.get("confirmpassword")}ConfirmedValidator(t,i){return r=>{const m=r.controls[i];m.errors&&!m.errors.confirmedValidator||m.setErrors(r.controls[t].value!==m.value?{confirmedValidator:!0}:null)}}onDelete(){this.message=""}onSignup(){const{name:t,email:i,role:r,password:a}=this.signupForm.value;this.authService.signUp(t,i,r,a).subscribe(m=>{this.message=m.message,this.signupForm.disable(),setTimeout(()=>{this.router.navigate(["verification"],{relativeTo:this.route})},2e3)},m=>{this.message=m.error.message})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(s.qu),e.Y36(l.F0),e.Y36(l.gz),e.Y36(g.e))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-signup-home"]],decls:57,vars:37,consts:[[1,"container","is-max-desktop"],[1,"mx-6"],[1,"image","row"],["src","../../../favicon.ico"],["class","mb-5",4,"ngIf"],[1,"row","is-full",3,"formGroup"],["form","ngForm"],[1,"mb-5"],[1,"field"],[1,"control"],["name","name","type","text","formControlName","name","placeholder","e.g Alex Smith",1,"input"],["class","is-size-7 has-text-danger",4,"ngIf"],[1,"control","has-icons-left","has-icons-right"],["name","email","type","email","formControlName","email","placeholder","alexsmith@ndu.edu.lb",1,"input"],[1,"icon","is-small","is-left"],[1,"fa","fa-envelope"],[1,"icon","is-small","is-right"],[1,"fa","fa-check"],[1,"control","has-icons-left"],[1,"select","is-fullwidth"],["name","role","formControlName","role",1,"custom-select","mb-3","has-text-grey-light"],["value","student","selected",""],["value","instructor"],[1,"icon","is-left"],[1,"has-text-grey-light","fa","fa-user"],["autocomplete","on","name","password","formControlName","password","type","password","placeholder","Password",1,"input",3,"type"],[1,"fa","fa-lock"],[1,"icon","is-small","is-right",2,"pointer-events","all","cursor","pointer",3,"click"],[1,"fa",3,"ngClass"],["autocomplete","on","name","confirmpassword","formControlName","confirmpassword","type","password","placeholder","Confirm Password",1,"input",3,"type"],[1,"has-text-centered","has-text-grey-light","mb-1"],["routerLink","/login",1,"has-text-info"],["type","button",1,"button","is-fullwidth","is-info",3,"disabled","click"],["role","alert",1,"notification",3,"ngClass"],[1,"delete",3,"click"],[1,"has-text-centered"],[1,"is-size-7","has-text-danger"],[4,"ngIf"]],template:function(t,i){1&t&&(e.TgZ(0,"div")(1,"div",0)(2,"div",1)(3,"figure",2),e._UZ(4,"img",3),e.qZA(),e.YNc(5,_,6,2,"div",4),e.TgZ(6,"form",5,6)(8,"div",7)(9,"div",8)(10,"p",9),e._UZ(11,"input",10),e.qZA(),e.YNc(12,y,4,3,"div",11),e.qZA(),e.TgZ(13,"div",8)(14,"p",12),e._UZ(15,"input",13),e.TgZ(16,"span",14),e._UZ(17,"i",15),e.qZA(),e.TgZ(18,"span",16),e._UZ(19,"i",17),e.qZA()(),e.YNc(20,k,3,2,"div",11),e.qZA()(),e.TgZ(21,"div",7)(22,"div",8)(23,"div",18)(24,"div",19)(25,"select",20)(26,"option",21),e._uU(27,"Student"),e.qZA(),e.TgZ(28,"option",22),e._uU(29,"Instructor"),e.qZA()()(),e.TgZ(30,"span",23),e._UZ(31,"i",24),e.qZA()()()(),e.TgZ(32,"div",7)(33,"div",8)(34,"p",12),e._UZ(35,"input",25),e.TgZ(36,"span",14),e._UZ(37,"i",26),e.qZA(),e.TgZ(38,"span",27),e.NdJ("click",function(){return i.user.showPassword=!i.user.showPassword}),e._UZ(39,"i",28),e.qZA()(),e.YNc(40,N,3,2,"div",11),e.qZA(),e.TgZ(41,"div",8)(42,"p",12),e._UZ(43,"input",29),e.TgZ(44,"span",14),e._UZ(45,"i",26),e.qZA(),e.TgZ(46,"span",27),e.NdJ("click",function(){return i.user.showConfirmPassword=!i.user.showConfirmPassword}),e._UZ(47,"i",28),e.qZA()(),e.YNc(48,x,2,1,"div",11),e.qZA()(),e.TgZ(49,"div",8)(50,"p",30),e._uU(51," Already have an account ? "),e.TgZ(52,"a",31),e._uU(53,"login"),e.qZA()(),e.TgZ(54,"p",9)(55,"button",32),e.NdJ("click",function(){return i.onSignup()}),e._uU(56," Sign up "),e.qZA()()()()()()()),2&t&&(e.xp6(5),e.Q6J("ngIf",i.message),e.xp6(1),e.Q6J("formGroup",i.signupForm),e.xp6(5),e.ekj("is-danger",i.name.invalid&&(i.name.dirty||i.name.touched))("is-success",i.name.valid),e.xp6(1),e.Q6J("ngIf",i.name.invalid&&(i.name.dirty||i.name.touched)),e.xp6(3),e.ekj("is-danger",i.email.invalid&&(i.email.dirty||i.email.touched))("is-success",i.email.valid),e.xp6(4),e.ekj("has-text-danger",i.email.invalid&&(i.email.dirty||i.email.touched))("has-text-success",i.email.valid&&(i.email.dirty||i.email.touched)),e.xp6(1),e.Q6J("ngIf",i.email.invalid&&(i.email.dirty||i.email.touched)),e.xp6(15),e.ekj("is-danger",i.password.invalid&&(i.password.dirty||i.password.touched))("is-success",i.password.valid),e.Q6J("type",i.user.showPassword?"text":"password"),e.xp6(4),e.Q6J("ngClass",e.WLB(31,f,!i.user.showPassword,i.user.showPassword)),e.xp6(1),e.Q6J("ngIf",i.password.invalid&&(i.password.dirty||i.password.touched)),e.xp6(3),e.ekj("is-danger",i.confirmpassword.invalid&&(i.confirmpassword.dirty||i.confirmpassword.touched))("is-success",i.confirmpassword.valid),e.Q6J("type",i.user.showConfirmPassword?"text":"password"),e.xp6(4),e.Q6J("ngClass",e.WLB(34,f,!i.user.showConfirmPassword,i.user.showConfirmPassword)),e.xp6(1),e.Q6J("ngIf",i.confirmpassword.invalid&&(i.confirmpassword.dirty||i.confirmpassword.touched)),e.xp6(7),e.Q6J("disabled",!i.signupForm.valid))},dependencies:[p.mk,p.O5,l.yS,s._Y,s.YN,s.Kr,s.Fj,s.EJ,s.JJ,s.JL,s.sg,s.u]}),n})()},{path:"verification",component:(()=>{class n{constructor(t,i,r){this.formBuilder=t,this.authService=i,this.router=r,this.display="05:00",this.progressNumber=100,this.message="",this.timer(5)}ngOnInit(){this.verificationForm=this.formBuilder.group({char1:new s.NI("",[s.kI.required,s.kI.minLength(1)]),char2:new s.NI("",[s.kI.required,s.kI.minLength(1)]),char3:new s.NI("",[s.kI.required,s.kI.minLength(1)]),char4:new s.NI("",[s.kI.required,s.kI.minLength(1)]),char5:new s.NI("",[s.kI.required,s.kI.minLength(1)]),char6:new s.NI("",[s.kI.required,s.kI.minLength(1)])})}ngOnDestroy(){this.runTimer=!1}timer(t){let i=60*t,r="0",a=60;const m=t<10?"0":"",c=setInterval(()=>{this.progressNumber=(60*+this.display.split(":")[0]+ +this.display.split(":")[1])/3,i--,0!=a?a--:a=59,r=a<10?"0"+a:a,this.display=`${m}${Math.floor(i/60)}:${r}`,!1===this.runTimer&&(clearInterval(c),this.display=""),0==i&&(this.display="Time out you need to Signup again",clearInterval(c))},1e3)}onDigitInput(t){let i;"Backspace"!==t.code&&(i=t.srcElement.nextElementSibling),"Backspace"===t.code&&(i=t.srcElement.previousElementSibling),i?.focus()}onVerify(){this.runTimer=!1,this.verificationForm.disable();const{char1:t,char2:i,char3:r,char4:a,char5:m,char6:c}=this.verificationForm.value;this.authService.verification(t+i+r+a+m+c).subscribe(h=>{this.message=h.message,setTimeout(()=>{this.router.navigate(["/login"])},2e3)},h=>{this.message="Something went wrong! \nYou need to signup again",setTimeout(()=>{this.router.navigate(["/register"])},2e3)})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(s.qu),e.Y36(g.e),e.Y36(l.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-email-verification"]],decls:23,vars:5,consts:[[1,"center"],["width","40%","src","../../../assets/email-verification.jpg","alt",""],[1,"has-text-weight-bold"],[1,"center",3,"formGroup"],["form","ngForm"],["style","width: 100%","class","message m-0 mb-5",3,"is-success","is-danger",4,"ngIf"],["class","progress mt-1 mb-6 is-success","max","100",3,"value",4,"ngIf"],[1,"d-flex"],["formControlName","char1","maxlength","1","type","text",1,"p-0","is-2","input",3,"keyup"],["digitSix",""],["formControlName","char2","maxlength","1","type","text",1,"p-0","is-2","input",3,"keyup"],["formControlName","char3","maxlength","1","type","text",1,"p-0","is-2","input",3,"keyup"],["formControlName","char4","maxlength","1","type","text",1,"p-0","is-2","input",3,"keyup"],["formControlName","char5","maxlength","1","type","text",1,"p-0","is-2","input",3,"keyup"],["formControlName","char6","maxlength","1","type","text",1,"p-0","is-2","input",3,"keyup"],["type","button",1,"mt-5","button","is-success",3,"disabled","click"],[1,"icon","is-small"],[1,"fa","fa-check"],[1,"message","m-0","mb-5",2,"width","100%"],[1,"py-2","message-body"],["max","100",1,"progress","mt-1","mb-6","is-success",3,"value"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"img",1),e.TgZ(2,"h1"),e._uU(3,"Email Verification"),e.qZA(),e.TgZ(4,"p",2),e._uU(5),e.qZA(),e.TgZ(6,"form",3,4),e.YNc(8,J,3,5,"article",5),e.YNc(9,U,1,1,"progress",6),e.TgZ(10,"div",7)(11,"input",8,9),e.NdJ("keyup",function(a){return i.onDigitInput(a)}),e.qZA(),e.TgZ(13,"input",10),e.NdJ("keyup",function(a){return i.onDigitInput(a)}),e.qZA(),e.TgZ(14,"input",11),e.NdJ("keyup",function(a){return i.onDigitInput(a)}),e.qZA(),e.TgZ(15,"input",12),e.NdJ("keyup",function(a){return i.onDigitInput(a)}),e.qZA(),e.TgZ(16,"input",13),e.NdJ("keyup",function(a){return i.onDigitInput(a)}),e.qZA(),e.TgZ(17,"input",14),e.NdJ("keyup",function(a){return i.onDigitInput(a)}),e.qZA()(),e.TgZ(18,"button",15),e.NdJ("click",function(){return i.onVerify()}),e.TgZ(19,"span",16),e._UZ(20,"i",17),e.qZA(),e.TgZ(21,"span"),e._uU(22,"Verify"),e.qZA()()()()),2&t&&(e.xp6(5),e.Oqu(i.display),e.xp6(1),e.Q6J("formGroup",i.verificationForm),e.xp6(2),e.Q6J("ngIf",i.message),e.xp6(1),e.Q6J("ngIf",i.display),e.xp6(9),e.Q6J("disabled",!i.verificationForm.valid))},dependencies:[p.O5,s._Y,s.Fj,s.JJ,s.JL,s.nD,s.sg,s.u],styles:["h1[_ngcontent-%COMP%]{text-align:center;margin:2rem 0}.center[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column}.d-flex[_ngcontent-%COMP%]{display:flex;justify-content:center}.is-2[_ngcontent-%COMP%]{margin:.5rem;width:2rem}input[_ngcontent-%COMP%]{text-align:center}"]}),n})()},{path:"**",redirectTo:""}];let Y=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[l.Bz.forChild(b),l.Bz]}),n})(),F=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[p.ez,Y,s.UX]}),n})()}}]);