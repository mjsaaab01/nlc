"use strict";(self.webpackChunkreservation_system_frontend=self.webpackChunkreservation_system_frontend||[]).push([[863],{4863:(A,u,a)=>{a.r(u),a.d(u,{SigninModule:()=>y});var d=a(6895),t=a(433),l=a(9965),e=a(8256),g=a(6221),c=a(3896);function p(i,o){if(1&i){const s=e.EpF();e.TgZ(0,"div",7)(1,"div")(2,"div",24)(3,"button",25),e.NdJ("click",function(){e.CHM(s);const r=e.oxw();return e.KtG(r.onDelete())}),e.qZA(),e.TgZ(4,"p",26),e._uU(5),e.qZA()()()()}if(2&i){const s=e.oxw();e.xp6(2),e.Q6J("ngClass","You are logged in."===s.message?"is-success":"is-danger"),e.xp6(3),e.Oqu(s.message)}}function h(i,o){1&i&&(e.TgZ(0,"div"),e._uU(1,"email is required."),e.qZA())}function f(i,o){1&i&&(e.TgZ(0,"div"),e._uU(1," Invalid email format. "),e.qZA())}function v(i,o){if(1&i&&(e.TgZ(0,"div",27),e.YNc(1,h,2,0,"div",28),e.YNc(2,f,2,0,"div",28),e.qZA()),2&i){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",null==s.email.errors?null:s.email.errors.required),e.xp6(1),e.Q6J("ngIf",null==s.email.errors?null:s.email.errors.pattern)}}function _(i,o){1&i&&(e.TgZ(0,"div"),e._uU(1," password is required. "),e.qZA())}function w(i,o){1&i&&(e.TgZ(0,"div"),e._uU(1," password must have at least eight characters, at least one uppercase letter, one lowercase letter, one number, one special character and cannot contain whitespace. "),e.qZA())}function Z(i,o){if(1&i&&(e.TgZ(0,"div",27),e.YNc(1,_,2,0,"div",28),e.YNc(2,w,2,0,"div",28),e.qZA()),2&i){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",null==s.password.errors?null:s.password.errors.required),e.xp6(1),e.Q6J("ngIf",null==s.password.errors?null:s.password.errors.pattern)}}const S=function(i,o){return{"fa-eye":i,"fa-eye-slash":o}},T=[{path:"",component:(()=>{class i{constructor(s,n,r,m){this.formBuilder=s,this.router=n,this.authService=r,this.userService=m,this.user={}}ngOnInit(){this.signinForm=this.formBuilder.group({email:new t.NI(this.user.email,[t.kI.required]),password:new t.NI(this.user.password,[t.kI.required,t.kI.minLength(8),t.kI.pattern(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{8,}$/)])})}get email(){return this.signinForm.get("email")}get password(){return this.signinForm.get("password")}onDelete(){this.message=""}onSignin(){const{email:s,password:n}=this.signinForm.value;this.authService.signIn(s,n).subscribe(r=>{this.message="You are logged in.",this.signinForm.disable(),localStorage.setItem("access_token",r.access_token),setTimeout(()=>{this.authService.toggleLoggedIn(!0),this.router.navigate(["/"])},2e3),this.userService.whoAmi().subscribe(m=>{this.userService.toggleRole(m.role)})},r=>{this.message=r.error.message})}}return i.\u0275fac=function(s){return new(s||i)(e.Y36(t.qu),e.Y36(l.F0),e.Y36(g.e),e.Y36(c.K))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-signin-home"]],decls:34,vars:22,consts:[[1,"container","is-max-desktop"],[1,"mx-6"],[1,"image","row"],["src","/logo.png",1,"is-fullwidth"],["class","mb-5",4,"ngIf"],[1,"row","is-full",3,"formGroup"],["form","ngForm"],[1,"mb-5"],[1,"field"],[1,"control","has-icons-left","has-icons-right"],["name","email","type","email","formControlName","email","placeholder","alexsmith@ndu.edu.lb",1,"input"],[1,"icon","is-small","is-left"],[1,"fa","fa-envelope"],[1,"icon","is-small","is-right"],[1,"fa","fa-check"],["class","is-size-7 has-text-danger",4,"ngIf"],["autocomplete","on","name","password","formControlName","password","type","password","placeholder","Password",1,"input",3,"type"],[1,"fa","fa-lock"],[1,"icon","is-small","is-right",2,"pointer-events","all","cursor","pointer",3,"click"],[1,"fa",3,"ngClass"],[1,"has-text-centered","has-text-grey-light","mb-1"],["routerLink","/register",1,"has-text-info"],[1,"control"],["type","button",1,"button","is-fullwidth","is-info",3,"disabled","click"],["role","alert",1,"notification",3,"ngClass"],[1,"delete",3,"click"],[1,"has-text-centered"],[1,"is-size-7","has-text-danger"],[4,"ngIf"]],template:function(s,n){1&s&&(e.TgZ(0,"div")(1,"div",0)(2,"div",1)(3,"figure",2),e._UZ(4,"img",3),e.qZA(),e.YNc(5,p,6,2,"div",4),e.TgZ(6,"form",5,6)(8,"div",7)(9,"div",8)(10,"p",9),e._UZ(11,"input",10),e.TgZ(12,"span",11),e._UZ(13,"i",12),e.qZA(),e.TgZ(14,"span",13),e._UZ(15,"i",14),e.qZA()(),e.YNc(16,v,3,2,"div",15),e.qZA()(),e.TgZ(17,"div",7)(18,"div",8)(19,"p",9),e._UZ(20,"input",16),e.TgZ(21,"span",11),e._UZ(22,"i",17),e.qZA(),e.TgZ(23,"span",18),e.NdJ("click",function(){return n.user.showPassword=!n.user.showPassword}),e._UZ(24,"i",19),e.qZA()(),e.YNc(25,Z,3,2,"div",15),e.qZA()(),e.TgZ(26,"div",8)(27,"p",20),e._uU(28," Don't have an account ? "),e.TgZ(29,"a",21),e._uU(30,"Sign up"),e.qZA()(),e.TgZ(31,"p",22)(32,"button",23),e.NdJ("click",function(){return n.onSignin()}),e._uU(33," Login "),e.qZA()()()()()()()),2&s&&(e.xp6(5),e.Q6J("ngIf",n.message),e.xp6(1),e.Q6J("formGroup",n.signinForm),e.xp6(5),e.ekj("is-danger",n.email.invalid&&(n.email.dirty||n.email.touched))("is-success",n.email.valid),e.xp6(4),e.ekj("has-text-danger",n.email.invalid&&(n.email.dirty||n.email.touched))("has-text-success",n.email.valid&&(n.email.dirty||n.email.touched)),e.xp6(1),e.Q6J("ngIf",n.email.invalid&&(n.email.dirty||n.email.touched)),e.xp6(4),e.ekj("is-danger",n.password.invalid&&(n.password.dirty||n.password.touched))("is-success",n.password.valid),e.Q6J("type",n.user.showPassword?"text":"password"),e.xp6(4),e.Q6J("ngClass",e.WLB(19,S,!n.user.showPassword,n.user.showPassword)),e.xp6(1),e.Q6J("ngIf",n.password.invalid&&(n.password.dirty||n.password.touched)),e.xp6(7),e.Q6J("disabled",!n.signinForm.valid))},dependencies:[d.mk,d.O5,l.yS,t._Y,t.Fj,t.JJ,t.JL,t.sg,t.u]}),i})()},{path:"**",redirectTo:""}];let C=(()=>{class i{}return i.\u0275fac=function(s){return new(s||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[l.Bz.forChild(T),l.Bz]}),i})(),y=(()=>{class i{}return i.\u0275fac=function(s){return new(s||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[d.ez,C,t.UX]}),i})()}}]);